INCLUDES = $(HOLDIR)/examples/Crypto/DES $(HOLDIR)/examples/Crypto/RC5

OPTIONS = QUIT_ON_FAILURE
MUNGE = ./munge.exe
MUNGE_DEPS = paperTheory

EXTRA_CLEANS = $(MUNGE) heap

all: $(MUNGE) report.tex

ifdef POLY
HOLHEAP = heap

all: $(HOLHEAP)

$(HOLHEAP): $(HOLDIR)/bin/hol.state
	$(protect $(HOLDIR)/bin/buildheap) $(DEBUG_FLAG) -o $@ \
		$(HOLDIR)/examples/Crypto/DES/des_propTheory
endif

$(MUNGE): $(patsubst %,%.uo,$(MUNGE_DEPS))
	$(HOLDIR)/bin/mkmunge.exe $(MUNGE_DEPS)

report.tex: $(MUNGE) report.htex
	$(MUNGE) < report.htex > report.tex

.PHONY: all
